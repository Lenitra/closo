<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Closo - Informations du groupe">
    <meta name="theme-color" content="#1e1b4b">
    <link rel="icon" type="image/png" href="static/imgs/logo.png">
    <title>Closo - Informations du groupe</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="static/css/styles.css">
    <link rel="stylesheet" href="static/css/app.css">
    <link rel="stylesheet" href="static/css/group_info.css">
</head>
<body class="app-body">
    <!-- Header -->
    <header class="app-header">
        <div class="header-container">
            <div class="header-left">
                <a href="#" class="back-btn" id="backBtn" aria-label="Retour">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                        <path d="M19 12H5M12 19l-7-7 7-7" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                </a>
                <h1 class="header-title">Informations du groupe</h1>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="app-main">
        <div class="app-container">
            <!-- Group Header -->
            <section class="group-info-header">
                <div class="group-avatar-container">
                    <div class="group-avatar-large" id="groupAvatar">
                        <span id="groupInitial">G</span>
                    </div>
                    <img id="groupImage" class="group-avatar-image" src="" alt="Groupe" style="display: none;">
                    <button class="avatar-edit-btn" id="editGroupAvatarBtn" aria-label="Modifier l'avatar du groupe">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
                            <path d="M23 19a2 2 0 01-2 2H3a2 2 0 01-2-2V8a2 2 0 012-2h4l2-3h6l2 3h4a2 2 0 012 2z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            <circle cx="12" cy="13" r="4" stroke="currentColor" stroke-width="2"/>
                        </svg>
                    </button>
                    <input type="file" id="groupAvatarInput" accept="image/*" hidden>
                </div>
                <h2 class="group-name" id="groupName">Groupe</h2>
                <p class="group-description" id="groupDescription"></p>
                <button class="btn-edit-info" id="editGroupInfoBtn">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none">
                        <path d="M11 4H4a2 2 0 00-2 2v14a2 2 0 002 2h14a2 2 0 002-2v-7" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M18.5 2.5a2.121 2.121 0 013 3L12 15l-4 1 1-4 9.5-9.5z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                    Modifier les informations
                </button>
            </section>

            <!-- Group Stats -->
            <section class="group-stats-section">
                <div class="stat-card">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                        <path d="M17 21v-2a4 4 0 00-4-4H5a4 4 0 00-4 4v2" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                        <circle cx="9" cy="7" r="4" stroke="currentColor" stroke-width="2"/>
                        <path d="M23 21v-2a4 4 0 00-3-3.87M16 3.13a4 4 0 010 7.75" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                    </svg>
                    <div class="stat-info">
                        <span class="stat-value" id="membersCount">0</span>
                        <span class="stat-label">Membres</span>
                    </div>
                </div>
                <div class="stat-card">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                        <rect x="3" y="3" width="18" height="18" rx="2" stroke="currentColor" stroke-width="2"/>
                        <circle cx="8.5" cy="8.5" r="1.5" fill="currentColor"/>
                        <path d="M21 15l-5-5L5 21" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                    <div class="stat-info">
                        <span class="stat-value" id="postsCount">0</span>
                        <span class="stat-label">Publications</span>
                    </div>
                </div>
            </section>

            <!-- Invite Section -->
            <section class="invite-section">
                <button class="btn-secondary btn-full" id="showInviteCodeBtn">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
                        <path d="M16 21v-2a4 4 0 00-4-4H5a4 4 0 00-4 4v2" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                        <circle cx="8.5" cy="7" r="4" stroke="currentColor" stroke-width="2"/>
                        <path d="M20 8v6M17 11h6" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                    </svg>
                    Inviter des membres
                </button>
            </section>

            <!-- Members List -->
            <section class="members-section">
                <h3 class="section-title">Membres</h3>
                <div class="members-list" id="membersList">
                    <!-- Members will be loaded dynamically -->
                </div>
            </section>

            <!-- Danger Zone -->
            <section class="danger-zone">
                <h3 class="section-title">Zone de danger</h3>
                <button class="btn-danger" id="leaveGroupBtn">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
                        <path d="M9 21H5a2 2 0 01-2-2V5a2 2 0 012-2h4" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                        <polyline points="16,17 21,12 16,7" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        <line x1="21" y1="12" x2="9" y2="12" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                    </svg>
                    Quitter le groupe
                </button>
                <button class="btn-danger" id="deleteGroupBtn" style="display: none;">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
                        <polyline points="3 6 5 6 21 6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M19 6v14a2 2 0 01-2 2H7a2 2 0 01-2-2V6m3 0V4a2 2 0 012-2h4a2 2 0 012 2v2" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                    Supprimer le groupe
                </button>
            </section>
        </div>
    </main>

    <!-- Edit Group Info Modal -->
    <div class="modal-overlay" id="editGroupInfoModal">
        <div class="modal">
            <div class="modal-header">
                <h2 class="modal-title">Modifier les informations</h2>
                <button class="modal-close" id="closeEditGroupInfoModal">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                        <path d="M18 6L6 18M6 6l12 12" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                    </svg>
                </button>
            </div>
            <form id="editGroupInfoForm" class="modal-form">
                <div class="form-group">
                    <label for="editGroupName">Nom du groupe</label>
                    <input type="text" id="editGroupName" name="groupName" required>
                </div>
                <div class="form-group">
                    <label for="editGroupDescription">Description</label>
                    <textarea id="editGroupDescription" name="groupDescription" rows="4" placeholder="Description du groupe..."></textarea>
                </div>
                <div class="form-actions">
                    <button type="button" class="btn-secondary" id="cancelEditGroupInfo">Annuler</button>
                    <button type="submit" class="btn-primary">Enregistrer</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Invite Code Modal -->
    <div class="modal-overlay" id="inviteCodeModal">
        <div class="modal modal-small">
            <div class="modal-header">
                <h2 class="modal-title">Code d'invitation</h2>
                <button class="modal-close" id="closeInviteCodeModal">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                        <path d="M18 6L6 18M6 6l12 12" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                    </svg>
                </button>
            </div>
            <div class="modal-body">
                <p class="invite-description">Partagez ce code avec vos amis pour les inviter a rejoindre le groupe.</p>
                <div class="invite-code-display">
                    <span class="invite-code" id="inviteCodeDisplay">--------</span>
                    <button class="btn-icon" id="copyInviteCode" title="Copier le code">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
                            <rect x="9" y="9" width="13" height="13" rx="2" stroke="currentColor" stroke-width="2"/>
                            <path d="M5 15H4a2 2 0 01-2-2V4a2 2 0 012-2h9a2 2 0 012 2v1" stroke="currentColor" stroke-width="2"/>
                        </svg>
                    </button>
                </div>
                <button class="btn-secondary btn-full" id="regenerateInviteCode">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none">
                        <path d="M1 4v6h6M23 20v-6h-6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M20.49 9A9 9 0 005.64 5.64L1 10m22 4l-4.64 4.36A9 9 0 013.51 15" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                    Regenerer le code
                </button>
            </div>
        </div>
    </div>

    <!-- Add Member Modal -->
    <div class="modal-overlay" id="addMemberModal">
        <div class="modal">
            <div class="modal-header">
                <h2 class="modal-title">Ajouter un membre</h2>
                <button class="modal-close" id="closeAddMemberModal">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                        <path d="M18 6L6 18M6 6l12 12" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                    </svg>
                </button>
            </div>
            <form id="addMemberForm" class="modal-form">
                <div class="form-group">
                    <label for="memberEmail">Email de l'utilisateur</label>
                    <input type="email" id="memberEmail" name="memberEmail" required placeholder="utilisateur@exemple.com">
                </div>
                <div class="form-group">
                    <label for="memberRole">Role</label>
                    <select id="memberRole" name="memberRole" required>
                        <option value="1">Membre</option>
                        <option value="2">Administrateur</option>
                    </select>
                </div>
                <div class="form-actions">
                    <button type="button" class="btn-secondary" id="cancelAddMember">Annuler</button>
                    <button type="submit" class="btn-primary">Ajouter</button>
                </div>
            </form>
        </div>
    </div>

    <script src="static/js/config.js"></script>
    <script src="static/js/group_info.js"></script>
</body>
</html>
