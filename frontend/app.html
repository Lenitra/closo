<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Closo - Vos groupes prives">
    <meta name="theme-color" content="#1e1b4b">
    <link rel="icon" type="image/png" href="static/imgs/logo.png">
    <title>Closo - Mes groupes</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="static/css/styles.css">
    <link rel="stylesheet" href="static/css/app.css">
</head>
<body class="app-body">
    <!-- Header -->
    <header class="app-header">
        <div class="header-container">
            <a href="index.html" class="logo">
                <img src="static/imgs/logo.png" alt="Closo" class="logo-img">
                <span>Closo</span>
            </a>
            <div class="header-actions">
                <button class="action-btn" id="joinGroupBtn">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none">
                        <path d="M16 21v-2a4 4 0 00-4-4H5a4 4 0 00-4 4v2" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                        <circle cx="8.5" cy="7" r="4" stroke="currentColor" stroke-width="2"/>
                        <path d="M20 8v6M17 11h6" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                    </svg>
                    <span>Rejoindre</span>
                </button>
                <button class="action-btn" id="createGroupBtn">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none">
                        <path d="M17 21v-2a4 4 0 00-4-4H5a4 4 0 00-4 4v2" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                        <circle cx="9" cy="7" r="4" stroke="currentColor" stroke-width="2"/>
                        <path d="M23 21v-2a4 4 0 00-3-3.87M16 3.13a4 4 0 010 7.75" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                    </svg>
                    <span>Creer</span>
                </button>
                <a href="publish.html" class="action-btn action-btn-primary" id="publishBtn">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none">
                        <rect x="3" y="3" width="18" height="18" rx="2" stroke="currentColor" stroke-width="2"/>
                        <circle cx="8.5" cy="8.5" r="1.5" fill="currentColor"/>
                        <path d="M21 15l-5-5L5 21" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                    <span>Publier</span>
                </a>
                <button class="user-btn" id="userMenuBtn" aria-label="Menu utilisateur">
                    <div class="user-avatar" id="userAvatar">
                        <span id="userInitial">T</span>
                    </div>
                </button>
            </div>
        </div>
    </header>

    <!-- User Dropdown -->
    <div class="user-dropdown" id="userDropdown">
        <div class="dropdown-header">
            <div class="user-avatar-lg">
                <span id="dropdownInitial">T</span>
            </div>
            <div class="dropdown-user-info">
                <span class="dropdown-username" id="dropdownUsername">User</span>
                <span class="dropdown-email" id="dropdownEmail">user@example.com</span>
            </div>
        </div>
        <div class="dropdown-divider"></div>
        <a href="profile.html" class="dropdown-item">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none">
                <path d="M20 21v-2a4 4 0 00-4-4H8a4 4 0 00-4 4v2" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                <circle cx="12" cy="7" r="4" stroke="currentColor" stroke-width="2"/>
            </svg>
            Mon profil
        </a>
        <div class="dropdown-divider"></div>
        <button class="dropdown-item logout" id="logoutBtn">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none">
                <path d="M9 21H5a2 2 0 01-2-2V5a2 2 0 012-2h4" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                <polyline points="16,17 21,12 16,7" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                <line x1="21" y1="12" x2="9" y2="12" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
            </svg>
            Se deconnecter
        </button>
    </div>

    <!-- Main Content -->
    <main class="app-main">
        <div class="app-container">
            <!-- Welcome -->
            <section class="welcome-section">
                <h1>Bonjour, <span id="welcomeName">Utilisateur</span></h1>
                <p>Selectionnez un groupe pour voir les publications</p>
            </section>

            <!-- Groups List -->
            <section class="groups-section">
                <h2 class="section-title">Mes groupes</h2>

                <div class="groups-list">
                    <!-- Les groupes seront charges dynamiquement -->
                </div>
            </section>
        </div>
    </main>

    <!-- Create Group Modal -->
    <div class="modal-overlay" id="createModal">
        <div class="modal">
            <div class="modal-header">
                <h2>Nouveau groupe</h2>
                <button class="modal-close" id="closeModal">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                        <path d="M18 6L6 18M6 6l12 12" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                    </svg>
                </button>
            </div>
            <form class="modal-body" id="createGroupForm">
                <div class="form-field">
                    <label for="groupName">Nom du groupe</label>
                    <input type="text" id="groupName" placeholder="Ex: Famille, Amis, Voyage..." required>
                </div>
                <div class="form-field">
                    <label for="groupDesc">Description (optionnel)</label>
                    <textarea id="groupDesc" placeholder="De quoi parle ce groupe ?" rows="3"></textarea>
                </div>
                <div class="form-field">
                    <label>Couleur</label>
                    <div class="color-options">
                        <label class="color-option">
                            <input type="radio" name="color" value="pink" checked>
                            <span style="background: linear-gradient(135deg, #f472b6, #c084fc);"></span>
                        </label>
                        <label class="color-option">
                            <input type="radio" name="color" value="blue">
                            <span style="background: linear-gradient(135deg, #60a5fa, #34d399);"></span>
                        </label>
                        <label class="color-option">
                            <input type="radio" name="color" value="orange">
                            <span style="background: linear-gradient(135deg, #fbbf24, #f97316);"></span>
                        </label>
                        <label class="color-option">
                            <input type="radio" name="color" value="purple">
                            <span style="background: linear-gradient(135deg, #a78bfa, #6366f1);"></span>
                        </label>
                        <label class="color-option">
                            <input type="radio" name="color" value="teal">
                            <span style="background: linear-gradient(135deg, #14b8a6, #2dd4bf);"></span>
                        </label>
                        <label class="color-option">
                            <input type="radio" name="color" value="red">
                            <span style="background: linear-gradient(135deg, #ef4444, #f97316);"></span>
                        </label>
                    </div>
                </div>
                <button type="submit" class="btn btn-primary btn-full">Creer le groupe</button>
            </form>
        </div>
    </div>

    <!-- Join Group Modal -->
    <div class="modal-overlay" id="joinModal">
        <div class="modal modal-small">
            <div class="modal-header">
                <h2>Rejoindre un groupe</h2>
                <button class="modal-close" id="closeJoinModal">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                        <path d="M18 6L6 18M6 6l12 12" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                    </svg>
                </button>
            </div>
            <form class="modal-body" id="joinGroupForm">
                <p class="form-description">Entrez le code d'invitation que vous avez recu pour rejoindre le groupe.</p>
                <div class="form-field">
                    <label for="inviteCode">Code d'invitation</label>
                    <input
                        type="text"
                        id="inviteCode"
                        placeholder="Ex: ABC12XYZ"
                        required
                        maxlength="8"
                        style="text-transform: uppercase; letter-spacing: 0.2em; font-family: 'Courier New', monospace; font-weight: 600; font-size: 1.2rem; text-align: center;"
                    >
                </div>
                <button type="submit" class="btn btn-primary btn-full">Rejoindre</button>
            </form>
        </div>
    </div>

    <script src="static/js/config.js"></script>
    <script src="static/js/auth-guard.js"></script>
    <script src="static/js/app.js"></script>
</body>
</html>
